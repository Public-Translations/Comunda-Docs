[Оригинал](https://docs.camunda.org/get-started/quick-start/gateway/)

# Добавление шлюзов в процесс

В этом разделе вы узнаете, как сделать свой процесс более динамичным с помощью Exclusive шлюзов.

# Добавление двух шлюзов

Мы хотим изменить наш процесс так, чтобы он был более динамичным. Для этого откройте процесс в Camunda Modeler.

Затем из левого меню Modeler выберите форму шлюза (алмаз) и перетащите ее в положение между стартовым событием и сервисной задачей.

Переместите пользовательскую задачу вниз и добавьте после нее другой шлюз. Наконец, отрегулируйте потоки управления так, чтобы модель выглядела именно так: 

![](https://user-images.githubusercontent.com/14002721/88682094-f344df80-d0fa-11ea-8c18-ec3fb4a17d98.png)



Теперь также назовите новые элементы соответственно: 

![](https://user-images.githubusercontent.com/14002721/88682195-12437180-d0fb-11ea-9e91-18b9f2b37d2a.png)

# Настройка шлюзов

Далее откройте панель свойств и выберите поток управления после <1000 €  после шлюза. Это обновит выбор в панели свойств. 

Прокрутите до свойства под названием Condition Type (Тип условия) и измените его на Expression (Выражение). 

Затем введите ${amount<1000} в качестве Выражения. Мы используем Java Unified Expression Language для оценки Шлюза.

![](https://user-images.githubusercontent.com/14002721/88683014-03a98a00-d0fc-11ea-995a-245f74a3f2ed.png)

Далее, измените Выражения (Expressions) для других потоков управления.

Для потока управления >=1000 € используйте Выражение (Expression) ${amount>=1000}: 

![](https://user-images.githubusercontent.com/14002721/88683253-42d7db00-d0fc-11ea-88c7-52976d48f2b9.png)

Для потока управления Yes, используйте Выражение (Expression) ${approved}: 

![](https://user-images.githubusercontent.com/14002721/88683412-70248900-d0fc-11ea-8e41-6a409f3e9c28.png)

Для потока управления No используйте выражение (Expression) ${!approved}": 

![](https://user-images.githubusercontent.com/14002721/88683550-9b0edd00-d0fc-11ea-969a-0c2577d3f6a4.png)

# Разверните процесс

Используйте кнопку развертывания в Camunda Modeler, чтобы развернуть обновленный процесс на Camunda.

# Работа над задачей

Перейдите на страницу Tasklist (http://localhost:8080/camunda/app/tasklist) и войдите в систему с учетными данными "demo / demo". 

Нажмите на кнопку, чтобы запустить экземпляр процесса получения платежа. 

Далее установите переменные для экземпляра процесса, используя общую форму, как мы узнали в разделе "Задачи пользователя".

![](https://user-images.githubusercontent.com/14002721/88683807-e0cba580-d0fc-11ea-9fa0-2c93914f7932.png)

Заполните форму, как показано на скриншоте, и убедитесь, что вы используете сумму, которая больше или равна 1000, чтобы увидеть платеж, одобренный заданием пользователя. Когда вы закончите, нажмите Старт.

Вы должны увидеть задание "Утвердить оплату", когда вы нажмете кнопку "Все задачи". В этом быстрый старт, мы вошли в список задач, как пользователь-администратор, и поэтому мы можем видеть все задачи, связанные с нашими процессами. Тем не менее, можно создать фильтры в списке задач, чтобы определить, какие пользователи могут видеть, какие задачи на основе авторизации пользователя, а также другие критерии.

Чтобы работать над задачей, выберите вкладку Форма и отметьте галочкой одобренную, чтобы наш платеж был одобрен. Мы должны увидеть, что наш работник печатает что-то в консоли.

Далее повторите те же действия, и на этот раз откажитесь от оплаты. Вы также должны создать один экземпляр с суммой менее 1000, чтобы подтвердить, что первый шлюз работает правильно.